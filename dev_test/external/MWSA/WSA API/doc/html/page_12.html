<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Moody's SAV"/>
<title>WSA API REFERENCE GUIDE: CMM Credit Model</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="http://www.moodys.com/index.html">
	 <img alt="Logo" src="project_logo.JPG"/>
	</a>
  </td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">WSA API REFERENCE GUIDE
   &#160;<span id="projectnumber">4.0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_12.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CMM Credit Model </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_12_0"></a>
Overview</h1>
<p>The CMM (Commercial Mortgage Metrics) model is the leading analytical tool for assessing default and recovery risk for commercial real estate loans. It enables you to perform stress tests and determine loan loss provisions on your commercial mortgage portfolios.</p>
<h1><a class="anchor" id="sec_12_1"></a>
Running CMM</h1>
<h2><a class="anchor" id="sec_12_1_0"></a>
Step 1: Select CMM credit model</h2>
<p>The very first step to use CMM credit model is calling set_moodys_credit_model() with enumeration MOODYS_CMM_SETTINGS :</p>
<div class="fragment"><div class="line">*  ...</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo);</div>
<div class="line">*   <a class="code" href="wsa_8h.html#a52f9130c1e96268fcbf711e3c5b16a71">set_moodys_credit_model_settings</a>(tid, <a class="code" href="wsa_8h.html#ab198f12203f8ec8fc2ab341807c7b988abfe79c4cad5f28e89398ffc2abbbcf9d">MOODYS_CMM_SETTINGS</a>, 1);</div>
<div class="line">*  ...</div>
<div class="line">*  </div>
</div><!-- fragment --><h2><a class="anchor" id="sec_12_1_1"></a>
Step 2: View/set CMM predefined scenarios</h2>
<p>API can get a list of available CMM pre-defined economy scenarios, which is read from deal file. User can call API to know which secnario is active currently. User also can select one of the scenarios, make it active to run CMM. <br/>
 Base on different economy scenario, each loan of collateral will be applied with different default probabilities and LGD. CMM will project collateral default principals base on these default probabilities. <br/>
 And it will project collateral recovery principals base on these LGD values. <br/>
 </p>
<h2>Get scenario list</h2>
<p>To get full list of scenarios avaiable in current deal, user need to call <a class="el" href="wsa_8h.html#a0dae2d4ac3425702a4a3af19c6d96ae2">get_moodys_cmm_scenarios()</a>.</p>
<ol type="1">
<li>Get the number of scenarios avaialble <div class="fragment"><div class="line">*  ...</div>
<div class="line">*   <span class="comment">// make sure .SFW deal file has CMM related files.</span></div>
<div class="line">*   <span class="comment">// get the number of all avaible CMM scenarios in current deal.</span></div>
<div class="line">*   <span class="keywordtype">int</span> num_cmm_scenarios = <a class="code" href="wsa_8h.html#a0dae2d4ac3425702a4a3af19c6d96ae2">get_moodys_cmm_scenarios</a>(tid, NULL, NULL);</div>
<div class="line">*   printf(<span class="stringliteral">&quot;%d scenarios found \n&quot;</span>, num_cmm_scenarios);</div>
<div class="line">*  ...</div>
<div class="line">*  </div>
</div><!-- fragment --></li>
<li>Populate scneario names <div class="fragment"><div class="line">*  ...</div>
<div class="line">*    <span class="keywordtype">char</span> **scenarios = <span class="keyword">new</span> <span class="keywordtype">char</span>*[num_cmm_scenarios];</div>
<div class="line">*    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_cmm_scenarios; ++i)</div>
<div class="line">*      scenarios[i] = <span class="keyword">new</span> <span class="keywordtype">char</span>[20];</div>
<div class="line">*    <a class="code" href="wsa_8h.html#a0dae2d4ac3425702a4a3af19c6d96ae2">get_moodys_cmm_scenarios</a>(tid, NULL, scenarios); </div>
<div class="line">*  </div>
<div class="line">*   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;num_cmm_scenarios;i++){</div>
<div class="line">*       printf(<span class="stringliteral">&quot;name of scenario %d: %s \n&quot;</span>, i,scenarios[i]);</div>
<div class="line">*   }</div>
<div class="line">*  ...</div>
<div class="line">*  </div>
</div><!-- fragment --></li>
</ol>
<h2>View current cmm scenario</h2>
<div class="fragment"><div class="line">*  ...</div>
<div class="line">*    <span class="keywordtype">char</span> current_scenario[20];</div>
<div class="line">*    <a class="code" href="wsa_8h.html#af863d3f725bc09fb9b051ba8c3a65f2d">get_current_moodys_cmm_scenario</a>(tid, NULL, current_scenario);</div>
<div class="line">*    printf(<span class="stringliteral">&quot;current active CMM scenario is %s \n&quot;</span>, current_scenario);</div>
<div class="line">*  ... </div>
<div class="line">*  </div>
</div><!-- fragment --><h2>Set current cmm scenario</h2>
<div class="fragment"><div class="line">*  ...</div>
<div class="line">*    <span class="keywordtype">char</span> **scenarios = <span class="keyword">new</span> <span class="keywordtype">char</span>*[num_cmm_scenarios];</div>
<div class="line">*    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_cmm_scenarios; ++i)</div>
<div class="line">*      scenarios[i] = <span class="keyword">new</span> <span class="keywordtype">char</span>[20];</div>
<div class="line">*    <a class="code" href="wsa_8h.html#a0dae2d4ac3425702a4a3af19c6d96ae2">get_moodys_cmm_scenarios</a>(tid, NULL, scenarios);</div>
<div class="line">*    <a class="code" href="wsa_8h.html#aeafd14f4f73f3efb8aeef86e48d21553">set_current_moodys_cmm_scenario</a>(tid, NULL, scenarios[2]); </div>
<div class="line">*  ... </div>
<div class="line">*  </div>
</div><!-- fragment --><h2><a class="anchor" id="sec_12_1_2"></a>
Step 3: Run and get cashflow result</h2>
<p>After call <a class="el" href="ccmo_8h.html#acf68ddb88ebae9fd26d06458f408848e">run_deal_ex()</a>, API will start to run CMM credit model. The way getting the cashflow after running CMM is the same way as running a normal deal in WSA API. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 22 2019 21:18:34 for WSA API REFERENCE GUIDE by
    <a href="http://www.moodysanalytics.com/">
   Moody's Analytics SAV</a> </li>
  </ul>
</div>
</body>
</html>
