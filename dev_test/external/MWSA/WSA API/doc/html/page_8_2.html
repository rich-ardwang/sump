<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Moody's SAV"/>
<title>WSA API REFERENCE GUIDE: View descriptive data</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="http://www.moodys.com/index.html">
	 <img alt="Logo" src="project_logo.JPG"/>
	</a>
  </td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">WSA API REFERENCE GUIDE
   &#160;<span id="projectnumber">4.0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_8_2.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">View descriptive data </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>After deal was opened, user are able to retrieve descriptive information from deal file. API provide descriptive information in 3 levels: deal level, bond level and collateral level. </p>
<h1><a class="anchor" id="view_deal"></a>
View deal information</h1>
<p>There are three structures (<a class="el" href="struct_c_m_o___s_t_r_u_c_t.html" title="This is the primary structure used to pass information to and from the WSA API. ">CMO_STRUCT</a>, <a class="el" href="struct_m_a_r_k_i_t___d_e_a_l___i_n_f_o.html" title="This structure contains deal level information of a deal. ">MARKIT_DEAL_INFO</a> and <a class="el" href="struct_m_o_o_d_y_s___d_e_a_l___i_n_f_o.html" title="Additional deal information. ">MOODYS_DEAL_INFO</a>) contains the attributes of deal opened. </p>
<h2>Deal update id</h2>
<p>When a new update of SFW/CDOnet deal was published in deal library ,it will be assigned an unique number. For HECM and Agency pool, deal update id will return 0. <br/>
 User can get the update id for SFW/CDOnet by calling <a class="el" href="wsa_8h.html#a269cd70602eaac71d9570815f1ad79ec">get_deal_update_id()</a> after <a class="el" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex()</a>. </p>
<h3>Sample code</h3>
<div class="fragment"><div class="line">*  #include &lt;stdio.h&gt;</div>
<div class="line">*  #include <span class="stringliteral">&quot;wsa.h&quot;</span></div>
<div class="line">*  </div>
<div class="line">*   <span class="keywordtype">int</span> main()</div>
<div class="line">*   {</div>
<div class="line">*       <span class="keyword">const</span> <span class="keywordtype">char</span> input_path[] = <span class="stringliteral">&quot;C:\\Run.Bin&quot;</span>;</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a2da9487ad083f0bab496f9b9afe8850f">set_input_path</a>(input_path);</div>
<div class="line">*       <span class="keywordtype">void</span>* tid(NULL);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#ab025128aaeab8b60287f9737042a0b23">create_deal_scenario_object</a>(&amp;tid, NULL, NULL,<span class="keyword">false</span>);</div>
<div class="line">*   <span class="keywordtype">char</span> * deal_id = <span class="stringliteral">&quot;1776&quot;</span>;</div>
<div class="line">*       <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a> *pCmo = <span class="keyword">new</span> <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a>();</div>
<div class="line">*       strncpy_s(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a01c5eaff1227ade8809330e804edba14">dealid</a>, deal_id, <span class="keyword">sizeof</span>(deal_id));</div>
<div class="line">*       strncpy_s(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a19399bd919ce260471da370503a5c083">settlement_date</a>, <span class="stringliteral">&quot;06/07/14&quot;</span>, 8);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo);</div>
<div class="line">* </div>
<div class="line">*   <span class="keywordtype">char</span> update_id[10] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">*   <span class="comment">// call get_deal_update_id to fill deal update id into variable &quot;update_id&quot;</span></div>
<div class="line">*   <a class="code" href="wsa_8h.html#a269cd70602eaac71d9570815f1ad79ec">get_deal_update_id</a>(tid, update_id, <span class="keyword">sizeof</span>(update_id));</div>
<div class="line">*   printf(<span class="stringliteral">&quot;current deal update id is : %s \n&quot;</span>,update_id);</div>
<div class="line">* </div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a9a4fa1bf638cb2504b6d575bfdfa3045">close_deal_ex</a>(tid,pCmo);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a43485c7beba00b3d8bd349537d75cd32">release_deal_scenario_object</a>(&amp;tid);</div>
<div class="line">*       <span class="keywordflow">return</span> 0;</div>
<div class="line">*   }</div>
<div class="line">*  </div>
</div><!-- fragment --><p> <br/>
 </p>
<hr/>
<p> <br/>
 </p>
<h2><a class="el" href="struct_c_m_o___s_t_r_u_c_t.html" title="This is the primary structure used to pass information to and from the WSA API. ">CMO_STRUCT</a></h2>
<p><a class="el" href="struct_c_m_o___s_t_r_u_c_t.html" title="This is the primary structure used to pass information to and from the WSA API. ">CMO_STRUCT</a> is populated after a deal was opened.</p>
<h3>Sample code</h3>
<div class="fragment"><div class="line">*  #include &lt;stdio.h&gt;</div>
<div class="line">*  #include <span class="stringliteral">&quot;wsa.h&quot;</span></div>
<div class="line">*  </div>
<div class="line">*   <span class="keywordtype">int</span> main()</div>
<div class="line">*   {</div>
<div class="line">*       <span class="keyword">const</span> <span class="keywordtype">char</span> input_path[] = <span class="stringliteral">&quot;C:\\Run.Bin&quot;</span>;</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a2da9487ad083f0bab496f9b9afe8850f">set_input_path</a>(input_path);</div>
<div class="line">*       <span class="keywordtype">void</span>* tid(NULL);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#ab025128aaeab8b60287f9737042a0b23">create_deal_scenario_object</a>(&amp;tid, NULL, NULL,<span class="keyword">false</span>);</div>
<div class="line">*   <span class="keywordtype">char</span> * deal_id = <span class="stringliteral">&quot;1776&quot;</span>;</div>
<div class="line">*       <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a> *pCmo = <span class="keyword">new</span> <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a>();</div>
<div class="line">*       strncpy_s(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a01c5eaff1227ade8809330e804edba14">dealid</a>, deal_id, <span class="keyword">sizeof</span>(deal_id));</div>
<div class="line">*      strncpy_s(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a19399bd919ce260471da370503a5c083">settlement_date</a>, <span class="stringliteral">&quot;06/07/14&quot;</span>, 8);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo);</div>
<div class="line">*   printf(<span class="stringliteral">&quot;Deal id from CMO_STRUCT: %s \n&quot;</span>, pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a01c5eaff1227ade8809330e804edba14">dealid</a>);</div>
<div class="line">*   printf(<span class="stringliteral">&quot;Next paydate from CMO_STRUCT: %s \n&quot;</span>, pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#ab48975e2bb22632ba50dc270594efb79">next_pay_date</a>);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a9a4fa1bf638cb2504b6d575bfdfa3045">close_deal_ex</a>(tid,pCmo);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a43485c7beba00b3d8bd349537d75cd32">release_deal_scenario_object</a>(&amp;tid);</div>
<div class="line">*       <span class="keywordflow">return</span> 0;</div>
<div class="line">*  }</div>
<div class="line">*  </div>
</div><!-- fragment --><p> <br/>
 </p>
<hr/>
 <h2><a class="el" href="struct_m_a_r_k_i_t___d_e_a_l___i_n_f_o.html" title="This structure contains deal level information of a deal. ">MARKIT_DEAL_INFO</a></h2>
<p><a class="el" href="struct_m_a_r_k_i_t___d_e_a_l___i_n_f_o.html" title="This structure contains deal level information of a deal. ">MARKIT_DEAL_INFO</a> can be populated by calling <a class="el" href="ccmo_8h.html#a6be7da9f9ccb6c4b606c916a0ad095c5">get_deal_info()</a></p>
<h3>Sample code</h3>
<div class="fragment"><div class="line">*  ....</div>
<div class="line">*    <span class="comment">// view descriptive function must be called after deal opened</span></div>
<div class="line">*    <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo);</div>
<div class="line">* </div>
<div class="line">*    <span class="comment">// create a MARKIT_DEAL_INFO structure</span></div>
<div class="line">*    <a class="code" href="struct_m_a_r_k_i_t___d_e_a_l___i_n_f_o.html">MARKIT_DEAL_INFO</a> deal_info;</div>
<div class="line">*    <span class="comment">// populate MARKIT_DEAL_INFO by calling get_deal_info(), to get parent deal info, pass NULL at second parameter.</span></div>
<div class="line">*    <span class="keywordtype">int</span> ret = <a class="code" href="ccmo_8h.html#a6be7da9f9ccb6c4b606c916a0ad095c5">get_deal_info</a>(tid, NULL, &amp;deal_info);</div>
<div class="line">*    <span class="comment">// use return value to see if calling is successful</span></div>
<div class="line">*    <span class="keywordflow">if</span>(ret &lt; 0)</div>
<div class="line">*        printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="ccmo_8h.html#a167078d11a7d4e91373611a29e2a21b4">get_deal_error_msg</a>(tid)); </div>
<div class="line">*    <span class="keywordflow">else</span></div>
<div class="line">*        <span class="comment">// if return value is greater than 0, then user can inspect MARKIT_DEAL_INFO for details</span></div>
<div class="line">*        printf(<span class="stringliteral">&quot;deal %s opened , it has %d bonds and %d collaterals \n&quot;</span>, deal_info.<a class="code" href="struct_m_a_r_k_i_t___d_e_a_l___i_n_f_o.html#a57b4dafb89629992d81697265dad4d99">deal_name</a>, deal_info.<a class="code" href="struct_m_a_r_k_i_t___d_e_a_l___i_n_f_o.html#a063e4309326836abc1df9e5cc95d2a26">num_bonds</a>, deal_info.<a class="code" href="struct_m_a_r_k_i_t___d_e_a_l___i_n_f_o.html#aaccf0d915bf0e70e73bd9a641f3c9de6">num_colls</a>);</div>
<div class="line">* </div>
<div class="line">*  ....</div>
<div class="line">*  </div>
</div><!-- fragment --><p> <br/>
</p>
<h2><a class="el" href="struct_m_o_o_d_y_s___d_e_a_l___i_n_f_o.html" title="Additional deal information. ">MOODYS_DEAL_INFO</a></h2>
<p><a class="el" href="struct_m_o_o_d_y_s___d_e_a_l___i_n_f_o.html" title="Additional deal information. ">MOODYS_DEAL_INFO</a> contains additional deal information and can be populated by calling <a class="el" href="wsa_8h.html#a8f7ae69e026fdf09a4cbf46ba8fc7e73">get_deal_info_ex()</a>.</p>
<h3>Sample code</h3>
<div class="fragment"><div class="line">*  ....</div>
<div class="line">*  <span class="keywordtype">void</span> *pDeal = NULL;</div>
<div class="line">*  <span class="comment">//deal has been opened</span></div>
<div class="line">* </div>
<div class="line">*  <a class="code" href="struct_m_o_o_d_y_s___d_e_a_l___i_n_f_o.html">MOODYS_DEAL_INFO</a> mdi={};</div>
<div class="line">*  <span class="keywordtype">int</span> ret = <a class="code" href="wsa_8h.html#a8f7ae69e026fdf09a4cbf46ba8fc7e73">get_deal_info_ex</a>(pDeal, NULL, &amp;mdi);</div>
<div class="line">*  <span class="keywordflow">if</span> (0 != ret)</div>
<div class="line">*  {</div>
<div class="line">*    <span class="comment">// error handle</span></div>
<div class="line">*  }</div>
<div class="line">* </div>
<div class="line">*  ....</div>
<div class="line">*  </div>
</div><!-- fragment --><p> <br/>
 </p>
<h1><a class="anchor" id="view_bond"></a>
View bond information</h1>
<p>There are three structures contains bond information: "CCMO_BONDS_S", "MARKIT_BOND_INFO" and "MOODYS_BOND_INFO". </p>
<h2><a class="el" href="struct_c_c_m_o___b_o_n_d_s___s.html" title="This structure holds individual bond information. ">CCMO_BONDS_S</a></h2>
<p>User are able to populate a single <a class="el" href="struct_c_c_m_o___b_o_n_d_s___s.html" title="This structure holds individual bond information. ">CCMO_BONDS_S</a> by calling either <a class="el" href="ccmo_8h.html#a1459da6bd373350a1093048a2a82363f">get_bond_by_index_ex()</a> or <a class="el" href="ccmo_8h.html#a1f39ca4e17eb4888c41020efea24d1ec">get_bond_by_name_ex()</a>. <br/>
 </p>
<h3>Sample code</h3>
<div class="fragment"><div class="line">*  </div>
<div class="line">*   <span class="keywordtype">int</span> main()</div>
<div class="line">*   {</div>
<div class="line">*       <span class="keyword">const</span> <span class="keywordtype">char</span> input_path[] = <span class="stringliteral">&quot;C:\\Run.Bin&quot;</span>;</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a2da9487ad083f0bab496f9b9afe8850f">set_input_path</a>(input_path);</div>
<div class="line">*       <span class="keywordtype">void</span>* tid(NULL);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#ab025128aaeab8b60287f9737042a0b23">create_deal_scenario_object</a>(&amp;tid, NULL, NULL,<span class="keyword">false</span>);</div>
<div class="line">*   <span class="keywordtype">char</span> * deal_id = <span class="stringliteral">&quot;1776&quot;</span>;</div>
<div class="line">*       <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a> *pCmo = <span class="keyword">new</span> <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a>();</div>
<div class="line">*       strncpy_s(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a01c5eaff1227ade8809330e804edba14">dealid</a>, deal_id, <span class="keyword">sizeof</span>(deal_id));</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo);</div>
<div class="line">* </div>
<div class="line">*   <a class="code" href="struct_c_c_m_o___b_o_n_d_s___s.html">CCMO_BONDS_S</a> Bond_info;</div>
<div class="line">*   <a class="code" href="struct_c_c_m_o___b_o_n_d_s___s.html">CCMO_BONDS_S</a>* pBond_info = &amp;Bond_info;</div>
<div class="line">*   <span class="comment">// populate CCMO_BONDS_S by index</span></div>
<div class="line">*   printf(<span class="stringliteral">&quot;get_bond_by_index_ex() \n&quot;</span>);</div>
<div class="line">*   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0;i&lt; pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#ae3872d8b71028836f9932a2b65d9f1e2">num_bonds</a>;i++){</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a1459da6bd373350a1093048a2a82363f">get_bond_by_index_ex</a>(tid, pBond_info,i);</div>
<div class="line">*       printf(<span class="stringliteral">&quot;Bond:%s, Current Balance:%f \n&quot;</span>,pBond_info-&gt;<a class="code" href="struct_c_c_m_o___b_o_n_d_s___s.html#a4357946601651f978c6ae0614e9a8db4">stripped_id</a>,pBond_info-&gt;<a class="code" href="struct_c_c_m_o___b_o_n_d_s___s.html#a38ce8eb8e8d418f4ac805bc235f45528">current_balance</a>);</div>
<div class="line">*   }</div>
<div class="line">*   <span class="comment">// get CCMO_BONDS_S by a bond name</span></div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a1f39ca4e17eb4888c41020efea24d1ec">get_bond_by_name_ex</a>(tid, pBond_info,<span class="stringliteral">&quot;A2&quot;</span>);</div>
<div class="line">*   printf(<span class="stringliteral">&quot;get_bond_by_name_ex() \n&quot;</span>);</div>
<div class="line">*   printf(<span class="stringliteral">&quot;Bond:%s, Current Balance:%f \n&quot;</span>,pBond_info-&gt;<a class="code" href="struct_c_c_m_o___b_o_n_d_s___s.html#a4357946601651f978c6ae0614e9a8db4">stripped_id</a>,pBond_info-&gt;<a class="code" href="struct_c_c_m_o___b_o_n_d_s___s.html#a38ce8eb8e8d418f4ac805bc235f45528">current_balance</a>);</div>
<div class="line">*  </div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a9a4fa1bf638cb2504b6d575bfdfa3045">close_deal_ex</a>(tid,pCmo);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a43485c7beba00b3d8bd349537d75cd32">release_deal_scenario_object</a>(&amp;tid);</div>
<div class="line">*       <span class="keywordflow">return</span> 0;</div>
<div class="line">*  }</div>
<div class="line">*  </div>
<div class="line">*  </div>
</div><!-- fragment --><p>User can populate all bonds info by calling <a class="el" href="ccmo_8h.html#aff4581764ee945b6ef3f4b3415c6af1c">view_all_bonds_ex()</a> to avoid the looping. </p>
<h3>Sample code</h3>
<div class="fragment"><div class="line">*  <span class="keywordtype">int</span> main()</div>
<div class="line">*  {</div>
<div class="line">*   <span class="keyword">const</span> <span class="keywordtype">char</span> input_path[] = <span class="stringliteral">&quot;C:\\Run.Bin&quot;</span>;</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a2da9487ad083f0bab496f9b9afe8850f">set_input_path</a>(input_path);</div>
<div class="line">*   <span class="keywordtype">void</span>* tid(NULL);</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#ab025128aaeab8b60287f9737042a0b23">create_deal_scenario_object</a>(&amp;tid, NULL, NULL,<span class="keyword">false</span>);</div>
<div class="line">*   <span class="keywordtype">char</span> * deal_id = <span class="stringliteral">&quot;1776&quot;</span>;</div>
<div class="line">*   <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a> *pCmo = <span class="keyword">new</span> <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a>();</div>
<div class="line">*   strncpy_s(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a01c5eaff1227ade8809330e804edba14">dealid</a>, deal_id, <span class="keyword">sizeof</span>(deal_id));</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo);</div>
<div class="line">* </div>
<div class="line">*   <a class="code" href="struct_c_c_m_o___b_o_n_d_s___s.html">CCMO_BONDS_S</a> bond_info_list[9] = {};</div>
<div class="line">*   <span class="comment">// populate CCMO_BONDS_S array by view_all_bonds_ex()</span></div>
<div class="line">*   <a class="code" href="ccmo_8h.html#aff4581764ee945b6ef3f4b3415c6af1c">view_all_bonds_ex</a>(tid, bond_info_list);</div>
<div class="line">*   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<span class="keyword">sizeof</span>(bond_info_list)/<span class="keyword">sizeof</span>(<a class="code" href="struct_c_c_m_o___b_o_n_d_s___s.html">CCMO_BONDS_S</a>);i++){</div>
<div class="line">*       printf(<span class="stringliteral">&quot;Bond: %s -&gt; CUSIP: %s \n&quot;</span>,bond_info_list[i].stripped_id, bond_info_list[i].cusip);</div>
<div class="line">*   }</div>
<div class="line">* </div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a9a4fa1bf638cb2504b6d575bfdfa3045">close_deal_ex</a>(tid,pCmo);</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a43485c7beba00b3d8bd349537d75cd32">release_deal_scenario_object</a>(&amp;tid);</div>
<div class="line">*   <span class="keywordflow">return</span> 0;</div>
<div class="line">*  }</div>
<div class="line">*  </div>
</div><!-- fragment --><p> <br/>
 </p>
<hr/>
 <h2><a class="el" href="struct_m_a_r_k_i_t___b_o_n_d___i_n_f_o.html" title="This structure holds individual bond information. ">MARKIT_BOND_INFO</a></h2>
<p>User can get bond information by call <a class="el" href="ccmo_8h.html#a2c45b4e5b6232166404483f25ff64bd2">get_bond_info_by_index()</a> with bond index or calling <a class="el" href="ccmo_8h.html#a5d4f567e508d8243239485fab9c0fa12">get_bond_info_by_tranche()</a> with bond name. </p>
<h3>Sample code</h3>
<div class="fragment"><div class="line">*  <span class="keywordtype">int</span> main()</div>
<div class="line">*  {</div>
<div class="line">*   <span class="keyword">const</span> <span class="keywordtype">char</span> input_path[] = <span class="stringliteral">&quot;C:\\Run.Bin&quot;</span>;</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a2da9487ad083f0bab496f9b9afe8850f">set_input_path</a>(input_path);</div>
<div class="line">*   <span class="keywordtype">void</span>* tid(NULL);</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#ab025128aaeab8b60287f9737042a0b23">create_deal_scenario_object</a>(&amp;tid, NULL, NULL,<span class="keyword">false</span>);</div>
<div class="line">*   <span class="keywordtype">char</span> * deal_id = <span class="stringliteral">&quot;1776&quot;</span>;</div>
<div class="line">*   <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a> *pCmo = <span class="keyword">new</span> <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a>();</div>
<div class="line">*   strncpy_s(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a01c5eaff1227ade8809330e804edba14">dealid</a>, deal_id, <span class="keyword">sizeof</span>(deal_id));</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo);</div>
<div class="line">* </div>
<div class="line">*   <a class="code" href="struct_m_a_r_k_i_t___b_o_n_d___i_n_f_o.html">MARKIT_BOND_INFO</a> mbi = {};</div>
<div class="line">*   <span class="comment">// get MARKIT_BOND_INFO by index</span></div>
<div class="line">*   <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i =1;i&lt;=pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#ae3872d8b71028836f9932a2b65d9f1e2">num_bonds</a>;i++){</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a2c45b4e5b6232166404483f25ff64bd2">get_bond_info_by_index</a>(tid, NULL, i, &amp;mbi);</div>
<div class="line">*       printf(<span class="stringliteral">&quot;Bond: %s pays %d per year \n&quot;</span>,mbi.<a class="code" href="struct_m_a_r_k_i_t___b_o_n_d___i_n_f_o.html#a76b37ee100f5371999627fa9c2f23d55">tranche_name</a>,mbi.<a class="code" href="struct_m_a_r_k_i_t___b_o_n_d___i_n_f_o.html#a652fd3a1183df0a28378ff74a1158ad4">periodicity</a>);</div>
<div class="line">*   }</div>
<div class="line">*   <span class="comment">// get MARKIT_BOND_INFO by bond name</span></div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a5d4f567e508d8243239485fab9c0fa12">get_bond_info_by_tranche</a>(tid, NULL, <span class="stringliteral">&quot;A2&quot;</span>, &amp;mbi);</div>
<div class="line">*   printf(<span class="stringliteral">&quot;coupon of Bond:A2 is %f \n&quot;</span>,mbi.<a class="code" href="struct_m_a_r_k_i_t___b_o_n_d___i_n_f_o.html#a6aa1539c4de1aeaca40bfdf0ce2612f5">coupon</a>);</div>
<div class="line">* </div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a9a4fa1bf638cb2504b6d575bfdfa3045">close_deal_ex</a>(tid,pCmo);</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a43485c7beba00b3d8bd349537d75cd32">release_deal_scenario_object</a>(&amp;tid);</div>
<div class="line">*   <span class="keywordflow">return</span> 0;</div>
<div class="line">*  }</div>
<div class="line">*  </div>
</div><!-- fragment --><p><br/>
 </p>
<hr/>
<h2><a class="el" href="struct_m_o_o_d_y_s___b_o_n_d___i_n_f_o.html" title="Additional bond information. ">MOODYS_BOND_INFO</a></h2>
<p><a class="el" href="struct_m_o_o_d_y_s___b_o_n_d___i_n_f_o.html" title="Additional bond information. ">MOODYS_BOND_INFO</a> contains additional bond information and can be populated by calling <a class="el" href="wsa_8h.html#a01811aeb66d5a5b33ec1f68269110d83">get_bond_info_by_index_ex()</a> or <a class="el" href="wsa_8h.html#a5f1cc0bf841983e2cf670129d930aa93">get_bond_info_by_tranche_ex()</a>.</p>
<h1><a class="anchor" id="view_collateral"></a>
View collateral information</h1>
<h2><a class="el" href="struct_c_c_m_o___p_o_o_l___i_n_f_o.html" title="This structure holds information about collateral. ">CCMO_POOL_INFO</a> and <a class="el" href="struct_c_c_m_o___p_o_o_l___i_n_f_o___e_x.html" title="This structure holds information about collateral. ">CCMO_POOL_INFO_EX</a></h2>
<p>User can use <a class="el" href="ccmo_8h.html#a44dce7a94359aea724a4374f5fcd59da">view_colls_ex()</a> to populate all collaterals. <br/>
 if user want to get all collateral by supplying -1 in 2nd parameter, make sure you have allocate the pool_info/pool_info_ex size to number of collateral number <br/>
 in this case ,pCmo-&gt;num_colls is 64. </p>
<h3>sample code</h3>
<div class="fragment"><div class="line">*  <span class="keywordtype">int</span> main()</div>
<div class="line">*   {</div>
<div class="line">*       <span class="keyword">const</span> <span class="keywordtype">char</span> input_path[] = <span class="stringliteral">&quot;C:\\Run.Bin&quot;</span>;</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a2da9487ad083f0bab496f9b9afe8850f">set_input_path</a>(input_path);</div>
<div class="line">*       <span class="keywordtype">void</span>* tid(NULL);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#ab025128aaeab8b60287f9737042a0b23">create_deal_scenario_object</a>(&amp;tid, NULL, NULL,<span class="keyword">false</span>);</div>
<div class="line">*   <span class="keywordtype">char</span> * deal_id = <span class="stringliteral">&quot;1776&quot;</span>;</div>
<div class="line">*       <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a> *pCmo = <span class="keyword">new</span> <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a>();</div>
<div class="line">*       strncpy_s(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a01c5eaff1227ade8809330e804edba14">dealid</a>, deal_id, <span class="keyword">sizeof</span>(deal_id));</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo);</div>
<div class="line">* </div>
<div class="line">*   <span class="comment">// Create CCMO_POOL_INFO and CCMO_POOL_INFO_EX array to hold result.</span></div>
<div class="line">*   <a class="code" href="struct_c_c_m_o___p_o_o_l___i_n_f_o.html">CCMO_POOL_INFO</a> pool_info[64]={};</div>
<div class="line">*   <a class="code" href="struct_c_c_m_o___p_o_o_l___i_n_f_o___e_x.html">CCMO_POOL_INFO_EX</a> pool_info_ex[64]={};</div>
<div class="line">*   <span class="comment">// To populate all collateral info, call view_colls_ex() with -1 in second parameter</span></div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a44dce7a94359aea724a4374f5fcd59da">view_colls_ex</a>(tid, -1, pool_info, pool_info_ex, <span class="keyword">sizeof</span>(<a class="code" href="struct_c_c_m_o___p_o_o_l___i_n_f_o.html">CCMO_POOL_INFO</a>), <span class="keyword">sizeof</span>(<a class="code" href="struct_c_c_m_o___p_o_o_l___i_n_f_o___e_x.html">CCMO_POOL_INFO_EX</a>), 0);</div>
<div class="line">*   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;64;i++){</div>
<div class="line">*       printf(<span class="stringliteral">&quot;Collateral: %d, Balance: %f Periodicity: %d \n&quot;</span>,i,pool_info[i].current_balance,pool_info_ex[i].periodicity);</div>
<div class="line">*   }</div>
<div class="line">* </div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a9a4fa1bf638cb2504b6d575bfdfa3045">close_deal_ex</a>(tid,pCmo);</div>
<div class="line">*       <a class="code" href="ccmo_8h.html#a43485c7beba00b3d8bd349537d75cd32">release_deal_scenario_object</a>(&amp;tid);</div>
<div class="line">*       <span class="keywordflow">return</span> 0;</div>
<div class="line">*   }</div>
<div class="line">*  </div>
</div><!-- fragment --><p><br/>
 </p>
<hr/>
<h2><a class="el" href="struct_m_a_r_k_i_t___p_o_o_l___i_n_f_o.html" title="This structure holds information about collateral. ">MARKIT_POOL_INFO</a></h2>
<p><a class="el" href="struct_m_a_r_k_i_t___p_o_o_l___i_n_f_o.html" title="This structure holds information about collateral. ">MARKIT_POOL_INFO</a> is also a structure providing collateral information. User can popluate this structure by calling <a class="el" href="ccmo_8h.html#ae568bf323c77a0269e15308fe76610a1">get_next_collat()</a>. <br/>
 Make sure call <a class="el" href="ccmo_8h.html#a503fc99cbd63b3dd9f240567346116e4">obtain_collat_iterator()</a> to get an iterator for calling <a class="el" href="ccmo_8h.html#ae568bf323c77a0269e15308fe76610a1">get_next_collat()</a></p>
<h3>sample code</h3>
<div class="fragment"><div class="line">*  <span class="keywordtype">int</span> main()</div>
<div class="line">*  {</div>
<div class="line">*   <span class="keyword">const</span> <span class="keywordtype">char</span> input_path[] = <span class="stringliteral">&quot;C:\\Run.Bin&quot;</span>;</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a2da9487ad083f0bab496f9b9afe8850f">set_input_path</a>(input_path);</div>
<div class="line">*   <span class="keywordtype">void</span>* tid(NULL);</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#ab025128aaeab8b60287f9737042a0b23">create_deal_scenario_object</a>(&amp;tid, NULL, NULL,<span class="keyword">false</span>);</div>
<div class="line">*   <span class="keywordtype">char</span> * deal_id = <span class="stringliteral">&quot;1776&quot;</span>;</div>
<div class="line">*   <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a> *pCmo = <span class="keyword">new</span> <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a>();</div>
<div class="line">*   strncpy_s(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a01c5eaff1227ade8809330e804edba14">dealid</a>, deal_id, <span class="keyword">sizeof</span>(deal_id));</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo);</div>
<div class="line">* </div>
<div class="line">*   <span class="comment">// create a MARKIT_POOL_INFO structure</span></div>
<div class="line">*   <a class="code" href="struct_m_a_r_k_i_t___p_o_o_l___i_n_f_o.html">MARKIT_POOL_INFO</a>* mpi =0;</div>
<div class="line">*   <span class="comment">// getting iterator by calling obtain_collat_iterator()</span></div>
<div class="line">*   <span class="keywordtype">void</span>* coll_it =<a class="code" href="ccmo_8h.html#a503fc99cbd63b3dd9f240567346116e4">obtain_collat_iterator</a>(tid, 0);</div>
<div class="line">*   <span class="comment">// loop over all available collateral under the deal opened</span></div>
<div class="line">*   <span class="keywordflow">while</span> (mpi = <a class="code" href="ccmo_8h.html#ae568bf323c77a0269e15308fe76610a1">get_next_collat</a>(tid, coll_it)){</div>
<div class="line">*       printf(<span class="stringliteral">&quot;Loan ID: %d, Weight average coupon: %f \n&quot;</span>, mpi-&gt;<a class="code" href="struct_m_a_r_k_i_t___p_o_o_l___i_n_f_o.html#abf97f8f12375c2338c3689e52b920ebe">loan_number</a> ,mpi-&gt;<a class="code" href="struct_m_a_r_k_i_t___p_o_o_l___i_n_f_o.html#ae1cfec5cdc8db36bc6632898967b7b4f">wac</a>);</div>
<div class="line">*   }</div>
<div class="line">* </div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a9a4fa1bf638cb2504b6d575bfdfa3045">close_deal_ex</a>(tid,pCmo);</div>
<div class="line">*   <a class="code" href="ccmo_8h.html#a43485c7beba00b3d8bd349537d75cd32">release_deal_scenario_object</a>(&amp;tid);</div>
<div class="line">*   <span class="keywordflow">return</span> 0;</div>
<div class="line">*  }</div>
<div class="line">*  </div>
</div><!-- fragment --><p> <br/>
 </p>
<hr/>
<h2><a class="el" href="struct_m_o_o_d_y_s___p_o_o_l___i_n_f_o.html">MOODYS_POOL_INFO</a></h2>
<p><a class="el" href="struct_m_o_o_d_y_s___p_o_o_l___i_n_f_o.html">MOODYS_POOL_INFO</a> contains additional collateral information. Users can populate this structure by calling <a class="el" href="wsa_8h.html#acf49f825926e70d9467912ca83c65267">get_next_collat_ex()</a>.</p>
<p>Make sure to call <a class="el" href="wsa_8h.html#a7de6f5dba784e3c89fb8ca0bdd63546e">obtain_collat_iterator_ex()</a> to get an iterator for calling <a class="el" href="wsa_8h.html#acf49f825926e70d9467912ca83c65267">get_next_collat_ex()</a>.</p>
<h3>sample code</h3>
<div class="fragment"><div class="line">*  <span class="keywordtype">void</span>* tid = NULL;</div>
<div class="line">*  <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a> *pCmo = <span class="keyword">new</span> <a class="code" href="struct_c_m_o___s_t_r_u_c_t.html">CMO_STRUCT</a>();</div>
<div class="line">*  memset(pCmo, 0, <span class="keyword">sizeof</span>(*pCmo));</div>
<div class="line">*  strcpy(pCmo-&gt;<a class="code" href="struct_c_m_o___s_t_r_u_c_t.html#a01c5eaff1227ade8809330e804edba14">dealid</a>, <span class="stringliteral">&quot;STATICLO&quot;</span>);</div>
<div class="line">* </div>
<div class="line">*  <a class="code" href="wsa_8h.html#a9e7e4827be8b826e4893bf3b8c1361c2">set_engine_preference</a>(<a class="code" href="wsa_8h.html#ac912e01ca57dd58abfa1dd39451a26efada55b3ef67ff9e3111c04b2371d2d37d">PICK_CDONET_ENGINE_FOR_MAPPED_DEALS</a>);</div>
<div class="line">*  assert(0 == <a class="code" href="ccmo_8h.html#a9fec86c2764699a30bc1f0d93d990e6a">open_deal_ex</a>(tid, pCmo));</div>
<div class="line">* </div>
<div class="line">*  <a class="code" href="struct_m_o_o_d_y_s___p_o_o_l___i_n_f_o.html">MOODYS_POOL_INFO</a>* coll_info =0;</div>
<div class="line">*  <span class="keywordtype">void</span>* coll_it =<a class="code" href="wsa_8h.html#a7de6f5dba784e3c89fb8ca0bdd63546e">obtain_collat_iterator_ex</a>(tid, 0);</div>
<div class="line">*  <span class="keywordflow">if</span>(coll_it == 0)</div>
<div class="line">*  {</div>
<div class="line">*      std::cout &lt;&lt; <span class="stringliteral">&quot;Failure to start collat iteration &quot;</span> &lt;&lt; <a class="code" href="ccmo_8h.html#a167078d11a7d4e91373611a29e2a21b4">get_deal_error_msg</a>(tid) &lt;&lt; std::endl;</div>
<div class="line">*  }</div>
<div class="line">*  <span class="keywordflow">while</span>(coll_info = <a class="code" href="wsa_8h.html#acf49f825926e70d9467912ca83c65267">get_next_collat_ex</a>(tid,coll_it))</div>
<div class="line">*  {</div>
<div class="line">*      <span class="comment">// do what you need with collateral</span></div>
<div class="line">*  }</div>
<div class="line">* </div>
<div class="line">*  assert(0 == <a class="code" href="ccmo_8h.html#a9a4fa1bf638cb2504b6d575bfdfa3045">close_deal_ex</a>(tid, pCmo));</div>
<div class="line">*  <span class="keyword">delete</span> pCmo;</div>
<div class="line">*  pCmo = NULL;</div>
<div class="line">*  </div>
</div><!-- fragment --><p> <br/>
 </p>
<hr/>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="page_8.html">Tutorial</a></li>
    <li class="footer">Generated on Wed May 22 2019 21:18:34 for WSA API REFERENCE GUIDE by
    <a href="http://www.moodysanalytics.com/">
   Moody's Analytics SAV</a> </li>
  </ul>
</div>
</body>
</html>
